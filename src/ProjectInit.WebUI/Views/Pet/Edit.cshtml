@using ProjectInit.Core.Entities
@model Pet

<h1>Редагування</h1>

<form asp-action="Edit" enctype="multipart/form-data">
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <div class="mb-3 row">
        <div class="col-md-4">
            @Html.DisplayNameFor(model => model.Name)
        </div>
        <div class="col-md-8">
            @Html.TextBoxFor(model => model.Name, new { @class = "form-control" })
            <span asp-validation-for="Name" class="text-danger" />
        </div>
    </div>

    <div class="mb-3 row">
        <div class="col-md-4">
            @Html.DisplayNameFor(model => model.Type)
        </div>
        <div class="col-md-8">
            @Html.TextBoxFor(model => model.Type, new { @class = "form-control" })
            <span asp-validation-for="Type" class="text-danger" />
        </div>
    </div>

    <div class="form-group mt-3 row">
        <div class="text-end">
            @Html.DisplayNameFor(model => model.ImageFile)
            <input id="imageInput" asp-for="ImageFile" accept="image/*" />
            <span asp-validation-for="ImageFile" class="text-danger"></span>
        </div>
        <div class="mt-3 text-end">
            <img style="width: 155px" id="imagePreview" alt="..." src="/img/pets/no_photo.jpg" />
        </div>
    </div>


    <!-- Приховане поле для UserId, яке автоматично встановлюється в контролері -->
    @Html.HiddenFor(model => model.UserId)

    <div class="d-flex justify-content-center my-3">
        <button class="btn btn-primary" type="submit">Зберегти зміни</button>
    </div>
</form>

@section Scripts {
    <script>
        document.getElementById('imageInput').addEventListener('change', function (e) {
            var file = e.target.files[0];
            var reader = new FileReader();
            reader.onload = function (f) {
                document.getElementById('imagePreview').src = f.target.result;
            };
            reader.readAsDataURL(file);
        });
    </script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
