@page "/pets/Create"
@using ProjectInit.Core.Entities
@using ProjectInit.Infrastructure.DTOs
@using Microsoft.AspNetCore.Components.Forms
@using System.Net.Http.Json
@using Microsoft.AspNetCore.Http
@using System.Net.Http.Headers
@inject NavigationManager Navigation
@inject HttpClient Http

<h1>Створити нового пета</h1>

<form>
    <InputText @bind-Value="pet.Name" placeholder="Ім'я пета" />
    <br />
    <InputText @bind-Value="pet.Type" placeholder="Тип пета" />
    <br />
    <InputFile OnChange="@OnInputFileChange" />
    <br />
    <button type="submit">Створити</button>
</form>

@code {
    private PetCreateDto pet = new PetCreateDto();
    private IFormFile file;

    private async Task OnInputFileChange(InputFileChangeEventArgs e)
    {
        file = e.File;
    }

    private async Task CreatePet()
    {
        if (file != null)
        {
            pet.ImageFile = file;
        }
        await HttpClient.PostAsJsonAsync("api/pet/add", pet);
    }
}